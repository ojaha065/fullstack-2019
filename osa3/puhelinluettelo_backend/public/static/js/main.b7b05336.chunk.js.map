{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","phonebookService.js","components/App.js","index.js"],"names":["Filter","_ref","handleInputChange","react_default","a","createElement","htmlFor","type","id","name","onChange","PersonForm","props","onSubmit","required","Persons","filtered","Object","toConsumableArray","persons","filter","person","toLowerCase","includes","rows","map","key","number","data-id","onClick","e","removeNumber","target","getAttribute","Notification","notificationSettings","styles","border","concat","style","backgroundColor","paddingLeft","color","fontWeight","message","apiUrl","phonebookService","axios","get","newPerson","post","delete","put","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","phone","_useState4","setNewPerson","_useState5","_useState6","setFilter","_useState7","_useState8","setNotificationSettings","showNotification","time","setTimeout","useEffect","then","response","data","catch","error","value","console","components_Notification","components_PersonForm","preventDefault","some","window","confirm","find","copy","selected_index","findIndex","warn","status","components_Filter","components_Persons","removed","splice","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.b7b05336.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({handleInputChange}) => {\r\n    return (\r\n        <div>\r\n            <label htmlFor=\"filter\">Filter shown with</label>\r\n            <input type=\"text\" id=\"filter\" name=\"filter\" onChange={handleInputChange} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.onSubmit}>\r\n            <label htmlFor=\"name\">Name: </label>\r\n            <input type=\"text\" id=\"name\" name=\"name\" onChange={props.handleInputChange} required />\r\n            <br />\r\n            <label htmlFor=\"number\">Number: </label>\r\n            <input type=\"tel\" id=\"number\" name=\"number\" onChange={props.handleInputChange} required />\r\n            <br />\r\n            <button type=\"submit\">Add</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default PersonForm;","import React from \"react\";\r\n\r\nconst Persons = (props) => {\r\n    // Parsitaan rivit ja otetaan mahdollinen filtteri huomioon\r\n    let filtered = [...props.persons];\r\n    if(props.filter){\r\n        filtered = filtered.filter((person) => {\r\n            return person.name.toLowerCase().includes(props.filter);\r\n        });\r\n    }\r\n\r\n    const rows = filtered.map((person) => {\r\n        return (<li key={person.id}>{person.name} {person.number} <button data-id={person.id} type=\"button\" onClick={(e) => props.removeNumber(e.target.getAttribute(\"data-id\"))}>remove</button></li>);\r\n    });\r\n\r\n    return (\r\n        <ul>\r\n            {rows}\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default Persons;","import React from \"react\";\r\n\r\nconst Notification = ({notificationSettings}) => {\r\n    const styles = {\r\n        border: `5px solid ${notificationSettings.style === \"success\" ? \"green\" : \"red\"}`,\r\n        backgroundColor: \" #bfc9ca\",\r\n        paddingLeft: \"5px\",\r\n        color: notificationSettings.style === \"success\" ? \"green\" : \"red\",\r\n        fontWeight : \"bold\"\r\n    };\r\n\r\n    if(notificationSettings.message){\r\n        return (<div style={styles}><p>{notificationSettings.message}</p></div>);\r\n    }\r\n    else{\r\n        return (<div></div>);\r\n    }\r\n};\r\n\r\nexport default Notification;","import axios from \"axios\";\r\n\r\nconst apiUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n    return axios.get(apiUrl);\r\n};\r\nconst saveNewPerson = (newPerson) => {\r\n    return axios.post(apiUrl,newPerson);\r\n};\r\nconst deletePerson = (id) => {\r\n    return axios.delete(`${apiUrl}/${id}`);\r\n};\r\nconst replacePerson = (id,newPerson) => {\r\n    return axios.put(`${apiUrl}/${id}`,newPerson);\r\n};\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    saveNewPerson: saveNewPerson,\r\n    deletePerson: deletePerson,\r\n    replacePerson: replacePerson\r\n};","import React, { useState, useEffect } from \"react\";\r\n\r\nimport Filter from \"./Filter\";\r\nimport PersonForm from \"./PersonForm\";\r\nimport Persons from \"./Persons\";\r\nimport Notification from \"./Notification\";\r\n\r\nimport phonebookService from \"../phonebookService\"\r\n\r\nconst App = () => {\r\n    // Tilat\r\n    const [persons,setPersons] = useState([]);\r\n    const [newPerson,setNewPerson] = useState({\r\n        name: null,\r\n        phone: null\r\n    });\r\n    const [filter,setFilter] = useState(null);\r\n    const [notificationSettings,setNotificationSettings] = useState({\r\n        message: null,\r\n        style: null\r\n    });\r\n\r\n    const showNotification = (message,time,style) => {\r\n        setNotificationSettings({\r\n            message: message,\r\n            style: style\r\n        });\r\n        setTimeout(() => {\r\n            setNotificationSettings({\r\n                message: null,\r\n                style: null\r\n            });\r\n        },time * 1000);\r\n    };\r\n\r\n    // Alkutilan hakeminen\r\n    useEffect(() => {\r\n        phonebookService.getAll().then((response) => {\r\n            // OK\r\n            setPersons(response.data);\r\n        }).catch((error) => {\r\n            // Virhe\r\n            showNotification(\"Error retrieving data\",999,\"failure\");\r\n        });\r\n    },[]);\r\n\r\n    const handleInputChange = (e) => {\r\n        // Minusta on fiksumpaa, että on vain yksi muutoksenkäsittelijä input-kentille\r\n        switch(e.target.name){\r\n            case \"name\":\r\n                setNewPerson({\r\n                    name: e.target.value,\r\n                    number: newPerson.number\r\n                });\r\n                break;\r\n            case \"number\":\r\n                setNewPerson({\r\n                    name: newPerson.name,\r\n                    number: e.target.value\r\n                });\r\n                break;\r\n            case \"filter\":\r\n                setFilter(e.target.value.toLowerCase());\r\n                break;\r\n            default:\r\n                console.error(\"Jokin meni nyt pieleen!\");\r\n        }\r\n    };\r\n    const addNumber = (e) => {\r\n        e.preventDefault();\r\n\r\n        if(!persons.some(person => person.name === newPerson.name)){\r\n            //setPersons(persons.concat(newPerson));\r\n            phonebookService.saveNewPerson(newPerson).then((response) => {\r\n                // OK\r\n                //console.log(response);\r\n                if(response.status === 201){\r\n                    // Haetaan kaikki uudelleen palvelimelta, jotta saadaan oikeat id:t\r\n                    phonebookService.getAll().then((response) => {\r\n                        // OK\r\n                        setPersons(response.data);\r\n                        showNotification(`Added ${newPerson.name}`,3,\"success\");\r\n                    });\r\n                }\r\n                else{\r\n                    showNotification(`Something odd happened while adding ${newPerson.name}. HTTP response was ${response.status} when 201 was expected`,5,\"failure\");\r\n                }\r\n            }).catch((error) => {\r\n                // Virhe\r\n                console.warn(error);\r\n                showNotification(error.response.data,8,\"failure\");\r\n            });\r\n        }\r\n        else if(window.confirm(\"That person is already on the list. Do you want to replace the old number with the new one?\")){\r\n            const id = persons.find((person) => {\r\n                return person.name === newPerson.name;\r\n            }).id;\r\n            phonebookService.replacePerson(id,newPerson).then(() => {\r\n                //console.log(persons);\r\n                let copy = [...persons];\r\n                const selected_index = copy.findIndex((person) => {\r\n                    return person.id === id;\r\n                });\r\n                copy[selected_index] = newPerson;\r\n                copy[selected_index].id = id; // Id palvelimella ei muutu päivityksen yhteydessä\r\n                setPersons(copy);\r\n                showNotification(`Modified ${newPerson.name}`,3,\"success\");\r\n            }).catch((error) => {\r\n                console.warn(error);\r\n                showNotification(error.response.data || `Failed to modify ${newPerson.name}`,8,\"failure\");\r\n            });\r\n        }\r\n        //console.log(persons);\r\n    };\r\n    const removeNumber = (id) => {\r\n        //console.log(persons);\r\n        // Haetaan tämän henkilön sijainti taulukossa\r\n        const selected_index = persons.findIndex((person) => {\r\n            return person.id === id;\r\n        });\r\n\r\n        if(window.confirm(`Are you sure? ${persons[selected_index].name} might get upset...`)){\r\n            phonebookService.deletePerson(id).then(() => {\r\n                let copy = [...persons];\r\n                const removed = copy.splice(selected_index,1); // Poistetaan olio myös paikallisesta kopiosta\r\n                showNotification(`Removed ${removed[0].name}`,3,\"success\");\r\n                setPersons(copy);\r\n            }).catch((error) => {\r\n                console.error(error);\r\n                showNotification(`Information of ${persons[selected_index].name} has already been removed from the server. Please refresh the page.`,5,\"failure\");\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n\r\n            <Notification notificationSettings={notificationSettings} />\r\n\r\n            <h2>Add new number</h2>\r\n            <PersonForm onSubmit={addNumber} handleInputChange={handleInputChange} />\r\n             \r\n            <h2>Numbers</h2>\r\n            <Filter handleInputChange={handleInputChange} />\r\n            <Persons persons={persons} filter={filter} removeNumber={removeNumber} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\n\nReactDOM.render(<App />,document.getElementById(\"root\"));"],"sourceRoot":""}